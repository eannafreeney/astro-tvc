---
import { getCollectionByRelease } from "../utils/utils";
import { getHomepageCollections } from "../utils/common";
import { CollectionsLinks, ProductsContainer, Product } from "../components";
import Layout from "../layouts/Layout.astro";

const data = await Promise.all([
  getCollectionByRelease("recent", 2),
  getCollectionByRelease("city-diaries", 2),
  getCollectionByRelease("featured", 2),
]);
const collections = getHomepageCollections(data);
---

<Layout>
  <!-- <Hero slides={data.slides.nodes} /> -->
  <CollectionsLinks />

  {
    collections.map(({ title, data, link }) => (
      <ProductsContainer title={title} link={link}>
        {data.map((product) => (
          <Product product={product} />
        ))}
      </ProductsContainer>
    ))
  }
</Layout>
